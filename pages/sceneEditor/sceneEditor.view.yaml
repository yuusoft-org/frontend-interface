dataSchema:
  type: object
  properties:
    currentSteps:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
    currentInstructions:
      type: array
      items:
        type: object
        properties:
          text:
            type: string
          id:
            type: string
          type:
            type: string
            enum:
              - text
              - image

refs:
  steps-editor:
    eventListeners:
      editorDataChanaged:
        handler: handleEditorDataChanaged
      newLine:
        handler: handleNewLine
      moveUp:
        handler: handleMoveUp
      moveDown:
        handler: handleMoveDown
  background-action:
    eventListeners:
      click:
        handler: handleBackgroundActionClick
  actions-overlay:
    eventListeners:
      click:
        handler: handleActionsOverlayClick
  actions-container:
    eventListeners:
      click:
        handler: handleActionsContainerClick
  command-line-actions:
    eventListeners:
      actionClicked:
        handler: handleActionClicked

template:
  - rtgl-view w=f h=f p=m:
    - rtgl-text s=h2: Scene Editor
    - rtgl-view d=h w=f h=f p=m:
      - rtgl-view flex=1:
        - steps-editor-component#steps-editor .steps=currentSteps:
      - rtgl-view flex=1:
        - rtgl-view h=300:
          - rtgl-text s=h2: Preview Section
        - rtgl-view w=f:
          - rtgl-text s=h2: Instructions section
          - rtgl-view g=m w=f:
            - $switch:
                'background':
                  - rtgl-view#background-action av=c ph=m bgc=mu h-bgc=ac h=32 w=f cur=p:
                    - rtgl-svg svg=text wh=24:
  - $switch:
      'mode != "steps-editor"':
        - rtgl-view#actions-overlay pos=abs cor=full ah=c av=c:
          - rtgl-view#actions-container w=500 h=800 bgc=mu p=m:
            - $switch:
                'mode == "actions"':
                  - command-line-actions-component#command-line-actions:
                'mode == "background"':
                  - command-line-background-component#command-line-background:
